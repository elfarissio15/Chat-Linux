<!DOCTYPE html>
<!-- saved from url=(0065)file:///C:/Users/moham/Downloads/ChatConnect%20documentation.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ChatConnect documentation</title>
  <link rel="stylesheet" href="./ChatConnect documentation_files/style.css">
</head>

<body class="stackedit">
  <div class="stackedit__left">
    <div class="stackedit__toc">
      
<ul>
<li><a href="file:///C:/Users/moham/Downloads/ChatConnect%20documentation.html#documentation-chatconnect-application">Documentation: ChatConnect Application</a></li>
<li><a href="file:///C:/Users/moham/Downloads/ChatConnect%20documentation.html#overview">Overview</a>
<ul>
<li><a href="file:///C:/Users/moham/Downloads/ChatConnect%20documentation.html#usage">Usage</a></li>
<li><a href="file:///C:/Users/moham/Downloads/ChatConnect%20documentation.html#structure">Structure</a></li>
<li><a href="file:///C:/Users/moham/Downloads/ChatConnect%20documentation.html#functions">Functions</a></li>
<li><a href="file:///C:/Users/moham/Downloads/ChatConnect%20documentation.html#usage-of-threads">Usage of Threads</a></li>
<li><a href="file:///C:/Users/moham/Downloads/ChatConnect%20documentation.html#error-handling">Error Handling</a></li>
<li><a href="file:///C:/Users/moham/Downloads/ChatConnect%20documentation.html#user-interface">User Interface</a></li>
<li><a href="file:///C:/Users/moham/Downloads/ChatConnect%20documentation.html#conclusion">Conclusion</a></li>
</ul>
</li>
<li><a href="file:///C:/Users/moham/Downloads/ChatConnect%20documentation.html#chat-flowchart">Chat flowchart</a></li>
<li><a href="file:///C:/Users/moham/Downloads/ChatConnect%20documentation.html#source-code">SOURCE CODE</a></li>
</ul>

    </div>
  </div>
  <div class="stackedit__right" style="
    left: 249px;
    height: 18190px;
    border-left-width: 40px;
">
    <div class="stackedit__html" style="
    padding-left: 10px;
    margin-right: 300px;
    margin-left: 60px;
    padding-top: 10px;
    padding-bottom: 10px;
    width: 900px;
">
      <h1 id="documentation-chatconnect-application">Documentation: ChatConnect Application</h1>
<img src="./ChatConnect documentation_files/ChatConnect logo.png" alt="ChatConnect logo" width="200" height="200" style="
    padding-left: 280px;
    padding-right: 280px;
">
<h1 id="overview">Overview</h1>
<p>This C source code implements a basic chat application using TCP socket programming. Users can host a connection or search for an available connection to chat with another user. The program supports real-time messaging between users over a network and it’s designed to run on Unix-like systems with support for socket programming and <code>pthreads</code>.</p>
<h2 id="usage">Usage</h2>
<ol>
<li>
<p>Open your terminal.</p>
</li>
<li>
<p>Go to the file directory (it should be located in your desktop):</p>
</li>
</ol>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">cd</span> <span class="token string">"/mnt/c/Users/moham/Desktop/CHAT CONNECT"</span>
</code></pre>
<ol start="3">
<li>Compile the source code:</li>
</ol>
<pre class=" language-bash"><code class="prism  language-bash">gcc -o ChatConnect -pthread ChatConnect.c
</code></pre>
<ol start="4">
<li>Run the compiled executable:</li>
</ol>
<pre class=" language-bash"><code class="prism  language-bash">./ChatConnect
</code></pre>
<ol start="5">
<li>
<p>Choose to host a connection or search for an available connection.</p>
</li>
<li>
<p>Enter a username.</p>
</li>
<li>
<p>Start chatting with the other user.</p>
</li>
</ol>
<h2 id="structure">Structure</h2>
<ol>
<li>
<p><strong>Header Files Inclusion:</strong> Includes necessary header files for socket programming and other functionalities.</p>
</li>
<li>
<p><strong>Global Variables Declaration:</strong> Declaration of global variables used throughout the program.</p>
</li>
<li>
<p><strong>Thread Functions:</strong> Defines thread functions for sending and receiving messages for each user.</p>
</li>
<li>
<p><strong>Utility Functions:</strong> Defines utility functions such as <code>clear_line()</code> and <code>UserPrint()</code>.</p>
</li>
<li>
<p><strong>Main Function:</strong> Implements the main logic of the program including the menu, socket creation, connection establishment, user interaction, and thread handling.</p>
</li>
</ol>
<h2 id="functions">Functions</h2>
<ol>
<li>
<p><code>clear_line()</code>: Clears the current user input lines on the terminal before receiving a new message.</p>
</li>
<li>
<p><code>sendThread()</code>, <code>ReceiveThread()</code>: Thread functions for sending and receiving messages for the first user.</p>
</li>
<li>
<p><code>sendThread1()</code>, <code>ReceiveThread1()</code>: Thread functions for sending and receiving messages for the second user.</p>
</li>
<li>
<p><code>UserPrint()</code>: Prints user information including username, connection details, and current time.</p>
</li>
<li>
<p>In the <code>main()</code> function, implementation of the program’s menu, socket creation, connection establishment, user interaction, and thread handling.</p>
</li>
</ol>
<h2 id="usage-of-threads">Usage of Threads</h2>
<ul>
<li>
<p>The program utilizes <code>pthreads</code> to handle concurrent sending and receiving of messages between users.</p>
</li>
<li>
<p>Separate threads are created for sending and receiving messages for each user.</p>
</li>
<li>
<p>Mutex and semaphores are used for synchronization and coordination between threads and users.</p>
</li>
</ul>
<h2 id="error-handling">Error Handling</h2>
<p>The program includes error handling mechanisms using <code>perror()</code> to handle various error conditions such as socket creation failure, connection establishment failure, and message sending/receiving errors.</p>
<h2 id="user-interface">User Interface</h2>
<ul>
<li>
<p>The program provides a simple command-line interface for user interaction.</p>
</li>
<li>
<p>Users are prompted to choose options from the menu and enter their usernames.</p>
</li>
<li>
<p>Messages are displayed in real-time with proper formatting to distinguish between senders and receivers.</p>
</li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>The provided C source code demonstrates the implementation of a basic chat application using TCP socket programming in C. The application showcases fundamental concepts such as socket communication, multithreading, and error handling. While the current implementation is simple, it can be extended and customized to suit more complex requirements and functionalities.</p>
<h1 id="chat-flowchart">Chat flowchart</h1>
<p>Hers is a flowchart explaining the work of the chat application:</p>
<pre class=" language-mermaid"><svg id="mermaid-svg-Wz4Td7QivUPVKmuc" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="2437.45751953125" style="max-width: 952.9114990234375px;height: 2100px;" viewBox="0 -0.0000019073486328125 952.9114990234375 2437.45751953125"><style>#mermaid-svg-Wz4Td7QivUPVKmuc{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#000000;}#mermaid-svg-Wz4Td7QivUPVKmuc .error-icon{fill:#552222;}#mermaid-svg-Wz4Td7QivUPVKmuc .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-Wz4Td7QivUPVKmuc .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-Wz4Td7QivUPVKmuc .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-Wz4Td7QivUPVKmuc .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-Wz4Td7QivUPVKmuc .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-Wz4Td7QivUPVKmuc .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-Wz4Td7QivUPVKmuc .marker{fill:#666;stroke:#666;}#mermaid-svg-Wz4Td7QivUPVKmuc .marker.cross{stroke:#666;}#mermaid-svg-Wz4Td7QivUPVKmuc svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-Wz4Td7QivUPVKmuc .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#000000;}#mermaid-svg-Wz4Td7QivUPVKmuc .cluster-label text{fill:#333;}#mermaid-svg-Wz4Td7QivUPVKmuc .cluster-label span{color:#333;}#mermaid-svg-Wz4Td7QivUPVKmuc .label text,#mermaid-svg-Wz4Td7QivUPVKmuc span{fill:#000000;color:#000000;}#mermaid-svg-Wz4Td7QivUPVKmuc .node rect,#mermaid-svg-Wz4Td7QivUPVKmuc .node circle,#mermaid-svg-Wz4Td7QivUPVKmuc .node ellipse,#mermaid-svg-Wz4Td7QivUPVKmuc .node polygon,#mermaid-svg-Wz4Td7QivUPVKmuc .node path{fill:#eee;stroke:#999;stroke-width:1px;}#mermaid-svg-Wz4Td7QivUPVKmuc .node .label{text-align:center;}#mermaid-svg-Wz4Td7QivUPVKmuc .node.clickable{cursor:pointer;}#mermaid-svg-Wz4Td7QivUPVKmuc .arrowheadPath{fill:#333333;}#mermaid-svg-Wz4Td7QivUPVKmuc .edgePath .path{stroke:#666;stroke-width:1.5px;}#mermaid-svg-Wz4Td7QivUPVKmuc .flowchart-link{stroke:#666;fill:none;}#mermaid-svg-Wz4Td7QivUPVKmuc .edgeLabel{background-color:white;text-align:center;}#mermaid-svg-Wz4Td7QivUPVKmuc .edgeLabel rect{opacity:0.5;background-color:white;fill:white;}#mermaid-svg-Wz4Td7QivUPVKmuc .cluster rect{fill:hsl(210,66.6666666667%,95%);stroke:#26a;stroke-width:1px;}#mermaid-svg-Wz4Td7QivUPVKmuc .cluster text{fill:#333;}#mermaid-svg-Wz4Td7QivUPVKmuc .cluster span{color:#333;}#mermaid-svg-Wz4Td7QivUPVKmuc div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(-160,0%,93.3333333333%);border:1px solid #26a;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-Wz4Td7QivUPVKmuc:root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#mermaid-svg-Wz4Td7QivUPVKmuc flowchart{fill:apa;}</style><g><g class="output"><g class="clusters"></g><g class="edgePaths"><g class="edgePath LS-Start LE-Create_socket" id="L-Start-Create_socket" style="opacity: 1;"><path class="path" d="M435.9206314086914,61.79999923706055L435.9206314086914,86.79999923706055L435.9206314086914,111.79999923706055" marker-end="url(https://stackedit.io/app#arrowhead2197)" style="fill:none"></path><defs><marker id="arrowhead2197" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Create_socket LE-option_1" id="L-Create_socket-option_1" style="opacity: 1;"><path class="path" d="M376.4518814086914,146.978549832631L192.67812967300415,183.51250076293945L192.67812967300415,231.8687515258789L192.67812967300415,293.5812520980835L192.67812967300415,431.7925052642822L192.67812967300415,570.003758430481L192.67812967300415,631.7162590026855L192.67812967300415,680.072509765625L192.67812967300415,810.7775115966797L192.67812967300415,954.8387632369995L202.41286337216428,993.1950130462646" marker-end="url(https://stackedit.io/app#arrowhead2198)" style="fill:none"></path><defs><marker id="arrowhead2198" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-option_1 LE-Bind_socket" id="L-option_1-Bind_socket" style="opacity: 1;"><path class="path" d="M208.34062957763672,1039.9075145721436L208.34062957763672,1078.2637643814087L208.34062957763672,1116.6200141906738" marker-end="url(https://stackedit.io/app#arrowhead2199)" style="fill:none"></path><defs><marker id="arrowhead2199" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Bind_socket LE-Socket_bound" id="L-Bind_socket-Socket_bound" style="opacity: 1;"><path class="path" d="M208.34062957763672,1163.3325157165527L208.34062957763672,1188.3325157165527L208.34062957763672,1213.3325157165527" marker-end="url(https://stackedit.io/app#arrowhead2200)" style="fill:none"></path><defs><marker id="arrowhead2200" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Socket_bound LE-Listen" id="L-Socket_bound-Listen" style="opacity: 1;"><path class="path" d="M208.34062957763672,1260.0450172424316L208.34062957763672,1285.0450172424316L208.34062957763672,1310.0450172424316" marker-end="url(https://stackedit.io/app#arrowhead2201)" style="fill:none"></path><defs><marker id="arrowhead2201" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Listen LE-Adress_available" id="L-Listen-Adress_available" style="opacity: 1;"><path class="path" d="M208.34062957763672,1356.7575187683105L208.34062957763672,1395.1137685775757L208.84062957763692,1433.9700207710266" marker-end="url(https://stackedit.io/app#arrowhead2202)" style="fill:none"></path><defs><marker id="arrowhead2202" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Adress_available LE-Connect_server" id="L-Adress_available-Connect_server" style="opacity: 1;"><path class="path" d="M175.92693040383836,1569.918819880615L129.8937530517578,1640.6887712478638L129.8937530517578,1679.045021057129" marker-end="url(https://stackedit.io/app#arrowhead2203)" style="fill:none"></path><defs><marker id="arrowhead2203" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Connect_server LE-Enter_S_username" id="L-Connect_server-Enter_S_username" style="opacity: 1;"><path class="path" d="M129.8937530517578,1725.7575225830078L129.8937530517578,1750.7575225830078L129.8937530517578,1775.7575225830078" marker-end="url(https://stackedit.io/app#arrowhead2204)" style="fill:none"></path><defs><marker id="arrowhead2204" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Enter_S_username LE-Username_S_entered" id="L-Enter_S_username-Username_S_entered" style="opacity: 1;"><path class="path" d="M129.8937530517578,1822.4700241088867L129.8937530517578,1847.4700241088867L129.8937530517578,1872.4700241088867" marker-end="url(https://stackedit.io/app#arrowhead2205)" style="fill:none"></path><defs><marker id="arrowhead2205" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Username_S_entered LE-Request_S_info" id="L-Username_S_entered-Request_S_info" style="opacity: 1;"><path class="path" d="M129.8937530517578,1919.1825256347656L129.8937530517578,1957.5387754440308L129.8937530517578,1995.895025253296" marker-end="url(https://stackedit.io/app#arrowhead2206)" style="fill:none"></path><defs><marker id="arrowhead2206" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Request_S_info LE-Display_S_table" id="L-Request_S_info-Display_S_table" style="opacity: 1;"><path class="path" d="M129.8937530517578,2042.6075267791748L129.8937530517578,2067.607526779175L129.8937530517578,2092.607526779175" marker-end="url(https://stackedit.io/app#arrowhead2207)" style="fill:none"></path><defs><marker id="arrowhead2207" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Display_S_table LE-Start_S_chatting" id="L-Display_S_table-Start_S_chatting" style="opacity: 1;"><path class="path" d="M129.8937530517578,2139.3200283050537L129.8937530517578,2164.3200283050537L129.8937530517578,2189.3200283050537" marker-end="url(https://stackedit.io/app#arrowhead2208)" style="fill:none"></path><defs><marker id="arrowhead2208" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Start_S_chatting LE-Discon_S_chatting" id="L-Start_S_chatting-Discon_S_chatting" style="opacity: 1;"><path class="path" d="M129.8937530517578,2236.0325298309326L129.8937530517578,2261.0325298309326L129.8937530517578,2286.0325298309326" marker-end="url(https://stackedit.io/app#arrowhead2209)" style="fill:none"></path><defs><marker id="arrowhead2209" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Discon_S_chatting LE-End" id="L-Discon_S_chatting-End" style="opacity: 1;"><path class="path" d="M129.8937530517578,2332.7450313568115L129.8937530517578,2357.7450313568115L569.5845293242219,2403.674713451304" marker-end="url(https://stackedit.io/app#arrowhead2210)" style="fill:none"></path><defs><marker id="arrowhead2210" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Adress_available LE-Exit" id="L-Adress_available-Exit" style="opacity: 1;"><path class="path" d="M241.75432689258793,1569.9188169710903L286.7875061035156,1640.6887712478638L286.7875061035156,1702.4012718200684L286.7875061035156,1750.7575225830078L286.7875061035156,1799.1137733459473L286.7875061035156,1847.4700241088867L286.7875061035156,1895.8262748718262L286.7875061035156,1957.5387754440308L286.7875061035156,2019.2512760162354L286.7875061035156,2067.607526779175L286.7875061035156,2115.9637775421143L286.7875061035156,2164.3200283050537L286.7875061035156,2212.676279067993L286.7875061035156,2261.0325298309326L286.7875061035156,2286.0325298309326" marker-end="url(https://stackedit.io/app#arrowhead2211)" style="fill:none"></path><defs><marker id="arrowhead2211" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Exit LE-End" id="L-Exit-End" style="opacity: 1;"><path class="path" d="M286.7875061035156,2332.7450313568115L286.7875061035156,2357.7450313568115L569.7443666521485,2402.4559174634396" marker-end="url(https://stackedit.io/app#arrowhead2212)" style="fill:none"></path><defs><marker id="arrowhead2212" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Create_socket LE-option_2" id="L-Create_socket-option_2" style="opacity: 1;"><path class="path" d="M495.3893814086914,153.48512372265162L592.8143844604492,183.51250076293945L592.8143844604492,208.51250076293945" marker-end="url(https://stackedit.io/app#arrowhead2213)" style="fill:none"></path><defs><marker id="arrowhead2213" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-option_2 LE-Connection_Available" id="L-option_2-Connection_Available" style="opacity: 1;"><path class="path" d="M592.8143844604492,255.22500228881836L592.8143844604492,293.5812520980835L593.3143844604493,332.4375054359439" marker-end="url(https://stackedit.io/app#arrowhead2214)" style="fill:none"></path><defs><marker id="arrowhead2214" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Connection_Available LE-Connect_attempt" id="L-Connection_Available-Connect_attempt" style="opacity: 1;"><path class="path" d="M542.9404902109917,481.7736108431635L452.10938262939453,570.003758430481L452.10938262939453,631.7162590026855L452.10938262939453,680.072509765625L452.10938262939453,810.7775115966797L452.10938262939453,954.8387632369995L452.10938262939453,1016.5512638092041L452.10938262939453,1078.2637643814087L452.10938262939453,1139.9762649536133L452.10938262939453,1188.3325157165527L452.10938262939453,1236.6887664794922L452.10938262939453,1285.0450172424316L452.10938262939453,1333.401268005371L452.10938262939453,1395.1137685775757L452.10938262939453,1494.5450191497803" marker-end="url(https://stackedit.io/app#arrowhead2215)" style="fill:none"></path><defs><marker id="arrowhead2215" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Connection_Available LE-No_connection" id="L-Connection_Available-No_connection" style="opacity: 1;"><path class="path" d="M626.9973630838558,498.46451941202406L663.1668853759766,570.003758430481L663.1668853759766,608.3600082397461" marker-end="url(https://stackedit.io/app#arrowhead2216)" style="fill:none"></path><defs><marker id="arrowhead2216" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Connect_attempt LE-Connection_accepted" id="L-Connect_attempt-Connection_accepted" style="opacity: 1;"><path class="path" d="M452.10938262939453,1541.2575206756592L452.10938262939453,1640.6887712478638L539.5619432873534,1679.045021057129" marker-end="url(https://stackedit.io/app#arrowhead2217)" style="fill:none"></path><defs><marker id="arrowhead2217" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Connection_accepted LE-Enter_username" id="L-Connection_accepted-Enter_username" style="opacity: 1;"><path class="path" d="M592.8143844604492,1725.7575225830078L592.8143844604492,1750.7575225830078L592.8143844604492,1775.7575225830078" marker-end="url(https://stackedit.io/app#arrowhead2218)" style="fill:none"></path><defs><marker id="arrowhead2218" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Enter_username LE-Username_entered" id="L-Enter_username-Username_entered" style="opacity: 1;"><path class="path" d="M592.8143844604492,1822.4700241088867L592.8143844604492,1847.4700241088867L592.8143844604492,1872.4700241088867" marker-end="url(https://stackedit.io/app#arrowhead2219)" style="fill:none"></path><defs><marker id="arrowhead2219" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Username_entered LE-Request_info" id="L-Username_entered-Request_info" style="opacity: 1;"><path class="path" d="M592.8143844604492,1919.1825256347656L592.8143844604492,1957.5387754440308L592.8143844604492,1995.895025253296" marker-end="url(https://stackedit.io/app#arrowhead2220)" style="fill:none"></path><defs><marker id="arrowhead2220" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Request_info LE-Display_table" id="L-Request_info-Display_table" style="opacity: 1;"><path class="path" d="M592.8143844604492,2042.6075267791748L592.8143844604492,2067.607526779175L592.8143844604492,2092.607526779175" marker-end="url(https://stackedit.io/app#arrowhead2221)" style="fill:none"></path><defs><marker id="arrowhead2221" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Display_table LE-Start_chatting" id="L-Display_table-Start_chatting" style="opacity: 1;"><path class="path" d="M592.8143844604492,2139.3200283050537L592.8143844604492,2164.3200283050537L592.8143844604492,2189.3200283050537" marker-end="url(https://stackedit.io/app#arrowhead2222)" style="fill:none"></path><defs><marker id="arrowhead2222" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Start_chatting LE-Discon_chatting" id="L-Start_chatting-Discon_chatting" style="opacity: 1;"><path class="path" d="M592.8143844604492,2236.0325298309326L592.8143844604492,2261.0325298309326L592.8143844604492,2286.0325298309326" marker-end="url(https://stackedit.io/app#arrowhead2223)" style="fill:none"></path><defs><marker id="arrowhead2223" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Discon_chatting LE-End" id="L-Discon_chatting-End" style="opacity: 1;"><path class="path" d="M592.8143844604492,2332.7450313568115L592.8143844604492,2357.7450313568115L592.8143844604492,2382.745032310486" marker-end="url(https://stackedit.io/app#arrowhead2224)" style="fill:none"></path><defs><marker id="arrowhead2224" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-No_connection LE-Retry_connection" id="L-No_connection-Retry_connection" style="opacity: 1;"><path class="path" d="M697.147407588884,655.072509765625L733.5193862915039,680.072509765625L733.5193862915039,810.7775115966797L733.5193862915039,954.8387632369995L733.5193862915039,1016.5512638092041L733.5193862915039,1078.2637643814087L733.5193862915039,1139.9762649536133L733.5193862915039,1188.3325157165527L733.5193862915039,1236.6887664794922L733.5193862915039,1285.0450172424316L733.5193862915039,1310.0450172424316" marker-end="url(https://stackedit.io/app#arrowhead2225)" style="fill:none"></path><defs><marker id="arrowhead2225" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Connect_attempt_retry LE-Connection_accepted" id="L-Connect_attempt_retry-Connection_accepted" style="opacity: 1;"><path class="path" d="M733.5193862915039,1541.2575206756592L733.5193862915039,1640.6887712478638L646.066825633545,1679.045021057129" marker-end="url(https://stackedit.io/app#arrowhead2226)" style="fill:none"></path><defs><marker id="arrowhead2226" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-No_connection LE-Rechoose" id="L-No_connection-Rechoose" style="opacity: 1;"><path class="path" d="M629.1863631630691,655.072509765625L592.8143844604492,680.072509765625L593.3143844604492,705.5725117683413" marker-end="url(https://stackedit.io/app#arrowhead2227)" style="fill:none"></path><defs><marker id="arrowhead2227" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Rechoose LE-option_1" id="L-Rechoose-option_1" style="opacity: 1;"><path class="path" d="M526.9273474640545,850.5954744286236L349.57188272476196,954.8387632369995L261.79224040985355,993.1950130462646" marker-end="url(https://stackedit.io/app#arrowhead2228)" style="fill:none"></path><defs><marker id="arrowhead2228" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Rechoose LE-Rechoose_o2" id="L-Rechoose-Rechoose_o2" style="opacity: 1;"><path class="path" d="M663.440527027922,846.8563648521133L876.7600135803223,954.8387632369995L876.7600135803223,1016.5512638092041L876.7600135803223,1078.2637643814087L876.7600135803223,1139.9762649536133L876.7600135803223,1188.3325157165527L876.7600135803223,1236.6887664794922L876.7600135803223,1285.0450172424316L876.7600135803223,1333.401268005371L876.7600135803223,1395.1137685775757L876.7600135803223,1517.9012699127197L876.7600135803223,1640.6887712478638L876.7600135803223,1702.4012718200684L876.7600135803223,1750.7575225830078L876.7600135803223,1799.1137733459473L876.7600135803223,1847.4700241088867L876.7600135803223,1895.8262748718262L876.7600135803223,1957.5387754440308L876.7600135803223,2019.2512760162354L876.7600135803223,2067.607526779175L876.7600135803223,2115.9637775421143L876.7600135803223,2164.3200283050537L876.7600135803223,2212.676279067993L876.7600135803223,2261.0325298309326L876.7600135803223,2286.0325298309326" marker-end="url(https://stackedit.io/app#arrowhead2229)" style="fill:none"></path><defs><marker id="arrowhead2229" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Rechoose_o2 LE-End" id="L-Rechoose_o2-End" style="opacity: 1;"><path class="path" d="M876.7600135803223,2332.7450313568115L876.7600135803223,2357.7450313568115L615.8391334711521,2402.1801422157264" marker-end="url(https://stackedit.io/app#arrowhead2230)" style="fill:none"></path><defs><marker id="arrowhead2230" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Retry_connection LE-End" id="L-Retry_connection-End" style="opacity: 1;"><path class="path" d="M805.1131362915039,1355.2747053878088L935.5100135803223,1395.1137685775757L935.5100135803223,1517.9012699127197L935.5100135803223,1640.6887712478638L935.5100135803223,1702.4012718200684L935.5100135803223,1750.7575225830078L935.5100135803223,1799.1137733459473L935.5100135803223,1847.4700241088867L935.5100135803223,1895.8262748718262L935.5100135803223,1957.5387754440308L935.5100135803223,2019.2512760162354L935.5100135803223,2067.607526779175L935.5100135803223,2115.9637775421143L935.5100135803223,2164.3200283050537L935.5100135803223,2212.676279067993L935.5100135803223,2261.0325298309326L935.5100135803223,2309.388780593872L935.5100135803223,2357.7450313568115L615.9415294011692,2402.837913914395" marker-end="url(https://stackedit.io/app#arrowhead2231)" style="fill:none"></path><defs><marker id="arrowhead2231" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-Retry_connection LE-Connect_attempt_retry" id="L-Retry_connection-Connect_attempt_retry" style="opacity: 1;"><path class="path" d="M733.5193862915039,1356.7575187683105L733.5193862915039,1395.1137685775757L733.5193862915039,1494.5450191497803" marker-end="url(https://stackedit.io/app#arrowhead2232)" style="fill:none"></path><defs><marker id="arrowhead2232" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Start-Create_socket" class="edgeLabel L-LS-Start&#39; L-LE-Create_socket"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Create_socket-option_1" class="edgeLabel L-LS-Create_socket&#39; L-LE-option_1"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-option_1-Bind_socket" class="edgeLabel L-LS-option_1&#39; L-LE-Bind_socket"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Bind_socket-Socket_bound" class="edgeLabel L-LS-Bind_socket&#39; L-LE-Socket_bound"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Socket_bound-Listen" class="edgeLabel L-LS-Socket_bound&#39; L-LE-Listen"></span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(208.34062957763672,1395.1137685775757)" style="opacity: 1;"><g transform="translate(-57.51874923706055,-13.356249809265137)" class="label"><rect rx="0" ry="0" width="115.0374984741211" height="26.712499618530273"></rect><foreignobject width="115.0374984741211" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Listen-Adress_available" class="edgeLabel L-LS-Listen&#39; L-LE-Adress_available">Adress Available</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(129.8937530517578,1640.6887712478638)" style="opacity: 1;"><g transform="translate(-11.324999809265137,-13.356249809265137)" class="label"><rect rx="0" ry="0" width="22.649999618530273" height="26.712499618530273"></rect><foreignobject width="22.649999618530273" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Adress_available-Connect_server" class="edgeLabel L-LS-Adress_available&#39; L-LE-Connect_server">Yes</span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Connect_server-Enter_S_username" class="edgeLabel L-LS-Connect_server&#39; L-LE-Enter_S_username"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Enter_S_username-Username_S_entered" class="edgeLabel L-LS-Enter_S_username&#39; L-LE-Username_S_entered"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Username_S_entered-Request_S_info" class="edgeLabel L-LS-Username_S_entered&#39; L-LE-Request_S_info"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Request_S_info-Display_S_table" class="edgeLabel L-LS-Request_S_info&#39; L-LE-Display_S_table"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Display_S_table-Start_S_chatting" class="edgeLabel L-LS-Display_S_table&#39; L-LE-Start_S_chatting"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Start_S_chatting-Discon_S_chatting" class="edgeLabel L-LS-Start_S_chatting&#39; L-LE-Discon_S_chatting"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Discon_S_chatting-End" class="edgeLabel L-LS-Discon_S_chatting&#39; L-LE-End"></span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(286.7875061035156,1957.5387754440308)" style="opacity: 1;"><g transform="translate(-9.401562690734863,-13.356249809265137)" class="label"><rect rx="0" ry="0" width="18.803125381469727" height="26.712499618530273"></rect><foreignobject width="18.803125381469727" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Adress_available-Exit" class="edgeLabel L-LS-Adress_available&#39; L-LE-Exit">No</span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Exit-End" class="edgeLabel L-LS-Exit&#39; L-LE-End"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Create_socket-option_2" class="edgeLabel L-LS-Create_socket&#39; L-LE-option_2"></span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(592.8143844604492,293.5812520980835)" style="opacity: 1;"><g transform="translate(-74.65625,-13.356249809265137)" class="label"><rect rx="0" ry="0" width="149.3125" height="26.712499618530273"></rect><foreignobject width="149.3125" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-option_2-Connection_Available" class="edgeLabel L-LS-option_2&#39; L-LE-Connection_Available">Connection Available</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(452.10938262939453,1078.2637643814087)" style="opacity: 1;"><g transform="translate(-11.324999809265137,-13.356249809265137)" class="label"><rect rx="0" ry="0" width="22.649999618530273" height="26.712499618530273"></rect><foreignobject width="22.649999618530273" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Connection_Available-Connect_attempt" class="edgeLabel L-LS-Connection_Available&#39; L-LE-Connect_attempt">Yes</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(663.1668853759766,570.003758430481)" style="opacity: 1;"><g transform="translate(-9.401562690734863,-13.356249809265137)" class="label"><rect rx="0" ry="0" width="18.803125381469727" height="26.712499618530273"></rect><foreignobject width="18.803125381469727" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Connection_Available-No_connection" class="edgeLabel L-LS-Connection_Available&#39; L-LE-No_connection">No</span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Connect_attempt-Connection_accepted" class="edgeLabel L-LS-Connect_attempt&#39; L-LE-Connection_accepted"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Connection_accepted-Enter_username" class="edgeLabel L-LS-Connection_accepted&#39; L-LE-Enter_username"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Enter_username-Username_entered" class="edgeLabel L-LS-Enter_username&#39; L-LE-Username_entered"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Username_entered-Request_info" class="edgeLabel L-LS-Username_entered&#39; L-LE-Request_info"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Request_info-Display_table" class="edgeLabel L-LS-Request_info&#39; L-LE-Display_table"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Display_table-Start_chatting" class="edgeLabel L-LS-Display_table&#39; L-LE-Start_chatting"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Start_chatting-Discon_chatting" class="edgeLabel L-LS-Start_chatting&#39; L-LE-Discon_chatting"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Discon_chatting-End" class="edgeLabel L-LS-Discon_chatting&#39; L-LE-End"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-No_connection-Retry_connection" class="edgeLabel L-LS-No_connection&#39; L-LE-Retry_connection"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Connect_attempt_retry-Connection_accepted" class="edgeLabel L-LS-Connect_attempt_retry&#39; L-LE-Connection_accepted"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-No_connection-Rechoose" class="edgeLabel L-LS-No_connection&#39; L-LE-Rechoose"></span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(349.57188272476196,954.8387632369995)" style="opacity: 1;"><g transform="translate(-11.324999809265137,-13.356249809265137)" class="label"><rect rx="0" ry="0" width="22.649999618530273" height="26.712499618530273"></rect><foreignobject width="22.649999618530273" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Rechoose-option_1" class="edgeLabel L-LS-Rechoose&#39; L-LE-option_1">Yes</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(876.7600135803223,1702.4012718200684)" style="opacity: 1;"><g transform="translate(-9.401562690734863,-13.356249809265137)" class="label"><rect rx="0" ry="0" width="18.803125381469727" height="26.712499618530273"></rect><foreignobject width="18.803125381469727" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Rechoose-Rechoose_o2" class="edgeLabel L-LS-Rechoose&#39; L-LE-Rechoose_o2">No</span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Rechoose_o2-End" class="edgeLabel L-LS-Rechoose_o2&#39; L-LE-End"></span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(935.5100135803223,1957.5387754440308)" style="opacity: 1;"><g transform="translate(-9.401562690734863,-13.356249809265137)" class="label"><rect rx="0" ry="0" width="18.803125381469727" height="26.712499618530273"></rect><foreignobject width="18.803125381469727" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Retry_connection-End" class="edgeLabel L-LS-Retry_connection&#39; L-LE-End">No</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(733.5193862915039,1395.1137685775757)" style="opacity: 1;"><g transform="translate(-11.324999809265137,-13.356249809265137)" class="label"><rect rx="0" ry="0" width="22.649999618530273" height="26.712499618530273"></rect><foreignobject width="22.649999618530273" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Retry_connection-Connect_attempt_retry" class="edgeLabel L-LS-Retry_connection&#39; L-LE-Connect_attempt_retry">Yes</span></div></foreignobject></g></g></g><g class="nodes"><g class="node default" id="flowchart-Start-8856" transform="translate(435.9206314086914,34.89999961853027)" style="opacity: 1;"><circle x="-26.899999618530273" y="-23.356249809265137" r="26.899999618530273" class="label-container"></circle><g class="label" transform="translate(0,0)"><g transform="translate(-16.899999618530273,-13.356249809265137)"><foreignobject width="33.79999923706055" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">start</div></foreignobject></g></g></g><g class="node default" id="flowchart-Create_socket-8857" transform="translate(435.9206314086914,135.15625)" style="opacity: 1;"><rect rx="0" ry="0" x="-59.46875" y="-23.356249809265137" width="118.9375" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-49.46875,-13.356249809265137)"><foreignobject width="98.9375" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Create socket</div></foreignobject></g></g></g><g class="node default" id="flowchart-option_1-8859" transform="translate(208.34062957763672,1016.5512638092041)" style="opacity: 1;"><rect rx="0" ry="0" x="-67.78750228881836" y="-23.356249809265137" width="135.57500457763672" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-57.78750228881836,-13.356249809265137)"><foreignobject width="115.57500457763672" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Host connection</div></foreignobject></g></g></g><g class="node default" id="flowchart-Bind_socket-8861" transform="translate(208.34062957763672,1139.9762649536133)" style="opacity: 1;"><rect rx="0" ry="0" x="-51.11249923706055" y="-23.356249809265137" width="102.2249984741211" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-41.11249923706055,-13.356249809265137)"><foreignobject width="82.2249984741211" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Bind socket</div></foreignobject></g></g></g><g class="node default" id="flowchart-Socket_bound-8863" transform="translate(208.34062957763672,1236.6887664794922)" style="opacity: 1;"><rect rx="0" ry="0" x="-58.03125" y="-23.356249809265137" width="116.0625" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-48.03125,-13.356249809265137)"><foreignobject width="96.0625" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Socket bound</div></foreignobject></g></g></g><g class="node default" id="flowchart-Listen-8865" transform="translate(208.34062957763672,1333.401268005371)" style="opacity: 1;"><rect rx="0" ry="0" x="-89.3375015258789" y="-23.356249809265137" width="178.6750030517578" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-79.3375015258789,-13.356249809265137)"><foreignobject width="158.6750030517578" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Listen for connections</div></foreignobject></g></g></g><g class="node default" id="flowchart-Adress_available-8867" transform="translate(208.34062957763672,1517.9012699127197)" style="opacity: 1;"><polygon points="84.43124914169312,0 168.86249828338623,-84.43124914169312 84.43124914169312,-168.86249828338623 0,-84.43124914169312" transform="translate(-84.43124914169312,84.43124914169312)" class="label-container"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-60.45624923706055,-13.356249809265137)"><foreignobject width="120.9124984741211" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Adress Available?</div></foreignobject></g></g></g><g class="node default" id="flowchart-Connect_server-8869" transform="translate(129.8937530517578,1702.4012718200684)" style="opacity: 1;"><rect rx="0" ry="0" x="-39.31875038146973" y="-23.356249809265137" width="78.63750076293945" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-29.318750381469727,-13.356249809265137)"><foreignobject width="58.63750076293945" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Connect</div></foreignobject></g></g></g><g class="node default" id="flowchart-Enter_S_username-8871" transform="translate(129.8937530517578,1799.1137733459473)" style="opacity: 1;"><rect rx="0" ry="0" x="-66.375" y="-23.356249809265137" width="132.75" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-56.375,-13.356249809265137)"><foreignobject width="112.75" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Enter username</div></foreignobject></g></g></g><g class="node default" id="flowchart-Username_S_entered-8873" transform="translate(129.8937530517578,1895.8262748718262)" style="opacity: 1;"><rect rx="0" ry="0" x="-76.0875015258789" y="-23.356249809265137" width="152.1750030517578" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-66.0875015258789,-13.356249809265137)"><foreignobject width="132.1750030517578" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Username entered</div></foreignobject></g></g></g><g class="node default" id="flowchart-Request_S_info-8875" transform="translate(129.8937530517578,2019.2512760162354)" style="opacity: 1;"><rect rx="0" ry="0" x="-121.89375305175781" y="-23.356249809265137" width="243.78750610351562" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-111.89375305175781,-13.356249809265137)"><foreignobject width="223.78750610351562" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Request other user information</div></foreignobject></g></g></g><g class="node default" id="flowchart-Display_S_table-8877" transform="translate(129.8937530517578,2115.9637775421143)" style="opacity: 1;"><rect rx="0" ry="0" x="-97.26875305175781" y="-23.356249809265137" width="194.53750610351562" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-87.26875305175781,-13.356249809265137)"><foreignobject width="174.53750610351562" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Display user information</div></foreignobject></g></g></g><g class="node default" id="flowchart-Start_S_chatting-8879" transform="translate(129.8937530517578,2212.676279067993)" style="opacity: 1;"><rect rx="0" ry="0" x="-59.462501525878906" y="-23.356249809265137" width="118.92500305175781" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-49.462501525878906,-13.356249809265137)"><foreignobject width="98.92500305175781" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Start chatting</div></foreignobject></g></g></g><g class="node default" id="flowchart-Discon_S_chatting-8881" transform="translate(129.8937530517578,2309.388780593872)" style="opacity: 1;"><rect rx="0" ry="0" x="-59.587501525878906" y="-23.356249809265137" width="119.17500305175781" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-49.587501525878906,-13.356249809265137)"><foreignobject width="99.17500305175781" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Disconnecting</div></foreignobject></g></g></g><g class="node default" id="flowchart-End-8883" transform="translate(592.8143844604492,2406.101282119751)" style="opacity: 1;"><circle x="-23.11875057220459" y="-23.356249809265137" r="23.356249809265137" class="label-container"></circle><g class="label" transform="translate(0,0)"><g transform="translate(-13.11875057220459,-13.356249809265137)"><foreignobject width="26.23750114440918" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">End</div></foreignobject></g></g></g><g class="node default" id="flowchart-Exit-8885" transform="translate(286.7875061035156,2309.388780593872)" style="opacity: 1;"><rect rx="0" ry="0" x="-23.75" y="-23.356249809265137" width="47.5" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-13.75,-13.356249809265137)"><foreignobject width="27.5" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Exit</div></foreignobject></g></g></g><g class="node default" id="flowchart-option_2-8889" transform="translate(592.8143844604492,231.8687515258789)" style="opacity: 1;"><rect rx="0" ry="0" x="-88.4749984741211" y="-23.356249809265137" width="176.9499969482422" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-78.4749984741211,-13.356249809265137)"><foreignobject width="156.9499969482422" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Search for connection</div></foreignobject></g></g></g><g class="node default" id="flowchart-Connection_Available-8891" transform="translate(592.8143844604492,431.7925052642822)" style="opacity: 1;"><polygon points="99.85499982833862,0 199.70999965667724,-99.85499982833862 99.85499982833862,-199.70999965667724 0,-99.85499982833862" transform="translate(-99.85499982833862,99.85499982833862)" class="label-container"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-77.59375,-13.356249809265137)"><foreignobject width="155.1875" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Connection Available?</div></foreignobject></g></g></g><g class="node default" id="flowchart-Connect_attempt-8893" transform="translate(452.10938262939453,1517.9012699127197)" style="opacity: 1;"><rect rx="0" ry="0" x="-39.31875038146973" y="-23.356249809265137" width="78.63750076293945" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-29.318750381469727,-13.356249809265137)"><foreignobject width="58.63750076293945" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Connect</div></foreignobject></g></g></g><g class="node default" id="flowchart-No_connection-8895" transform="translate(663.1668853759766,631.7162590026855)" style="opacity: 1;"><rect rx="0" ry="0" x="-96.4625015258789" y="-23.356249809265137" width="192.9250030517578" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-86.4625015258789,-13.356249809265137)"><foreignobject width="172.9250030517578" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">No Connection Available</div></foreignobject></g></g></g><g class="node default" id="flowchart-Connection_accepted-8897" transform="translate(592.8143844604492,1702.4012718200684)" style="opacity: 1;"><rect rx="0" ry="0" x="-85.61250305175781" y="-23.356249809265137" width="171.22500610351562" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-75.61250305175781,-13.356249809265137)"><foreignobject width="151.22500610351562" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Connection accepted</div></foreignobject></g></g></g><g class="node default" id="flowchart-Enter_username-8899" transform="translate(592.8143844604492,1799.1137733459473)" style="opacity: 1;"><rect rx="0" ry="0" x="-66.375" y="-23.356249809265137" width="132.75" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-56.375,-13.356249809265137)"><foreignobject width="112.75" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Enter username</div></foreignobject></g></g></g><g class="node default" id="flowchart-Username_entered-8901" transform="translate(592.8143844604492,1895.8262748718262)" style="opacity: 1;"><rect rx="0" ry="0" x="-76.0875015258789" y="-23.356249809265137" width="152.1750030517578" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-66.0875015258789,-13.356249809265137)"><foreignobject width="132.1750030517578" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Username entered</div></foreignobject></g></g></g><g class="node default" id="flowchart-Request_info-8903" transform="translate(592.8143844604492,2019.2512760162354)" style="opacity: 1;"><rect rx="0" ry="0" x="-121.89375305175781" y="-23.356249809265137" width="243.78750610351562" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-111.89375305175781,-13.356249809265137)"><foreignobject width="223.78750610351562" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Request other user information</div></foreignobject></g></g></g><g class="node default" id="flowchart-Display_table-8905" transform="translate(592.8143844604492,2115.9637775421143)" style="opacity: 1;"><rect rx="0" ry="0" x="-97.26875305175781" y="-23.356249809265137" width="194.53750610351562" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-87.26875305175781,-13.356249809265137)"><foreignobject width="174.53750610351562" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Display user information</div></foreignobject></g></g></g><g class="node default" id="flowchart-Start_chatting-8907" transform="translate(592.8143844604492,2212.676279067993)" style="opacity: 1;"><rect rx="0" ry="0" x="-59.462501525878906" y="-23.356249809265137" width="118.92500305175781" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-49.462501525878906,-13.356249809265137)"><foreignobject width="98.92500305175781" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Start chatting</div></foreignobject></g></g></g><g class="node default" id="flowchart-Discon_chatting-8909" transform="translate(592.8143844604492,2309.388780593872)" style="opacity: 1;"><rect rx="0" ry="0" x="-59.587501525878906" y="-23.356249809265137" width="119.17500305175781" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-49.587501525878906,-13.356249809265137)"><foreignobject width="99.17500305175781" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Disconnecting</div></foreignobject></g></g></g><g class="node default" id="flowchart-Retry_connection-8913" transform="translate(733.5193862915039,1333.401268005371)" style="opacity: 1;"><rect rx="0" ry="0" x="-71.59375" y="-23.356249809265137" width="143.1875" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-61.59375,-13.356249809265137)"><foreignobject width="123.1875" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Retry Connection</div></foreignobject></g></g></g><g class="node default" id="flowchart-Connect_attempt_retry-8914" transform="translate(733.5193862915039,1517.9012699127197)" style="opacity: 1;"><rect rx="0" ry="0" x="-94.5875015258789" y="-23.356249809265137" width="189.1750030517578" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-84.5875015258789,-13.356249809265137)"><foreignobject width="169.1750030517578" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Connect_attempt_retry</div></foreignobject></g></g></g><g class="node default" id="flowchart-Rechoose-8917" transform="translate(592.8143844604492,810.7775115966797)" style="opacity: 1;"><polygon points="105.70499982833863,0 211.40999965667726,-105.70499982833863 105.70499982833863,-211.40999965667726 0,-105.70499982833863" transform="translate(-105.70499982833863,105.70499982833863)" class="label-container"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-84.09375,-13.356249809265137)"><foreignobject width="168.1875" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Re-choose an operation</div></foreignobject></g></g></g><g class="node default" id="flowchart-Rechoose_o2-8921" transform="translate(876.7600135803223,2309.388780593872)" style="opacity: 1;"><rect rx="0" ry="0" x="-23.75" y="-23.356249809265137" width="47.5" height="46.71249961853027" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-13.75,-13.356249809265137)"><foreignobject width="27.5" height="26.712499618530273"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Exit</div></foreignobject></g></g></g></g></g></g></svg></pre>
<h1 id="source-code">SOURCE CODE</h1>
<pre class=" language-c"><code class="prism  language-c" style="dark+;width: 1147px;" width:=""><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h&gt;</span></span>

<span class="token comment">// Header files for socket programming.</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;sys/socket.h&gt;</span> </span><span class="token comment">// Header file for socket operations.</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;sys/un.h&gt;</span> </span><span class="token comment">// Provides definitions for Unix domain sockets.</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;netinet/in.h&gt;</span> </span><span class="token comment">// Defines constants and structures for Internet domain addresses.</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;arpa/inet.h&gt;</span> </span><span class="token comment">// Used for IP address convertion.</span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;sys/types.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;errno.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;semaphore.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;signal.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;time.h&gt;</span></span>

<span class="token macro property">#<span class="token directive keyword">define</span> MESSAGE_SIZE 1024</span>

<span class="token keyword">int</span> SocketFD<span class="token punctuation">;</span>
<span class="token keyword">int</span> ServConnSockFD<span class="token punctuation">;</span>
<span class="token keyword">char</span> message<span class="token punctuation">[</span>MESSAGE_SIZE<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> user1<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> user2<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> quit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment">/* Threads declaration */</span>
<span class="token comment">// Threads for user 1.</span>
pthread_t ThreadSend<span class="token punctuation">;</span>
pthread_t ThreadRecv<span class="token punctuation">;</span>
<span class="token comment">// Threads for user 2.</span>
pthread_t ThreadSend1<span class="token punctuation">;</span>
pthread_t ThreadRecv1<span class="token punctuation">;</span>

sem_t SemUser<span class="token punctuation">;</span>
pthread_mutex_t discon<span class="token punctuation">;</span>

<span class="token comment">// Declaration of Functions.</span>
<span class="token keyword">void</span> <span class="token function">clear_line</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">sendThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">ReceiveThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">sendThread1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">ReceiveThread1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">UserPrint</span><span class="token punctuation">(</span><span class="token keyword">char</span> user<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">char</span> user1<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">clear_line</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//printf("\033[1G"); // Move the cursor to the beginning of the line.</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\033[2A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Move the cursor two lines up.</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\033[2K\r"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Erase the entire line and move the cursor to the beginning.</span>
<span class="token punctuation">}</span>

<span class="token comment">// Thread function for sending messages.</span>
<span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">sendThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>quit <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// User input.</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\033[%dG\033[32;48;2;91;54;117m - (%s) &gt;&gt; \033[0m \n\n"</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"        "</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">fgets</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">stdin</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        message<span class="token punctuation">[</span><span class="token function">strlen</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> bytesSent <span class="token operator">=</span> <span class="token function">send</span><span class="token punctuation">(</span>ServConnSockFD<span class="token punctuation">,</span> message<span class="token punctuation">,</span> <span class="token function">strlen</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>bytesSent <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"Error sending message"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'\0'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">clear_line</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\n\t            \033[3;31m(Empty message! Enter a valid input)\033[0m\n\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Disconnecting proccess.</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token string">"quit"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token string">"QUIT"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t\t            \033[3;48;2;31;140;97m  (Disconnecting...)  \033[0m\n\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>discon<span class="token punctuation">)</span><span class="token punctuation">;</span>
            quit <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>discon<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">close</span><span class="token punctuation">(</span>ServConnSockFD<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">close</span><span class="token punctuation">(</span>SocketFD<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">pthread_kill</span><span class="token punctuation">(</span>ThreadRecv<span class="token punctuation">,</span> SIGTERM<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Send termination signal to receive thread.</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">// Exit the loop.</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>    
    <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Thread function for receiving messages.</span>
<span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">ReceiveThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>quit <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">memset</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> bytesRecv <span class="token operator">=</span> <span class="token function">recv</span><span class="token punctuation">(</span>ServConnSockFD<span class="token punctuation">,</span> message<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        message<span class="token punctuation">[</span>bytesRecv<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span>
        message<span class="token punctuation">[</span><span class="token function">strcspn</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'\0'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">continue</span><span class="token punctuation">;</span> <span class="token comment">// Skip empty messages.</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>bytesRecv <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"The other end has closed the connection or error receiving message!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token string">"quit"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token string">"QUIT"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Checking if the other user disconnected.</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t           (User \033[3;48;2;31;50;97m'%s'\033[0m has disconnected)\n\n"</span><span class="token punctuation">,</span> user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>discon<span class="token punctuation">)</span><span class="token punctuation">;</span>
            quit <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>discon<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">close</span><span class="token punctuation">(</span>ServConnSockFD<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">close</span><span class="token punctuation">(</span>SocketFD<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">pthread_kill</span><span class="token punctuation">(</span>ThreadSend<span class="token punctuation">,</span> SIGTERM<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Send termination signal to send thread.</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">// Exit the loop.</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> 
            <span class="token comment">// Handling a normal message.</span>
            <span class="token function">clear_line</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\033[%dG\033[36;47m &gt; [%s] \033[0m\n\n"</span><span class="token punctuation">,</span> <span class="token number">54</span><span class="token punctuation">,</span> user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\033[%dG%s\n"</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\033[%dG\033[32;48;2;91;54;117m - (%s) &gt;&gt; \033[0m \n\n"</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> user1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"        "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">fflush</span><span class="token punctuation">(</span><span class="token constant">stdout</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Clears the stdin &amp; ensures that the message is printed directly to the termminal.</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Functions for client side user.</span>
<span class="token comment">// The same as the two functions above!</span>

    <span class="token comment">// Thread function for sending messages.</span>
    <span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">sendThread1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       
        <span class="token keyword">while</span> <span class="token punctuation">(</span>quit <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// User input.</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\033[%dG\033[32;48;2;91;54;117m - (%s) &gt;&gt; \033[0m \n\n"</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"        "</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">fgets</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">stdin</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            message<span class="token punctuation">[</span><span class="token function">strlen</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> bytesSent <span class="token operator">=</span> <span class="token function">send</span><span class="token punctuation">(</span>SocketFD<span class="token punctuation">,</span> message<span class="token punctuation">,</span> <span class="token function">strlen</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>bytesSent <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"Error sending message"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'\0'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">clear_line</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\n\t         \033[3;31m(Empty message! Enter a valid input)\033[0m\n\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// Disconnecting proccess.</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token string">"quit"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token string">"QUIT"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t\t            \033[3;48;2;31;140;97m  (Disconnecting...)  \033[0m\n\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>discon<span class="token punctuation">)</span><span class="token punctuation">;</span>
                quit <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>discon<span class="token punctuation">)</span><span class="token punctuation">;</span>              
                <span class="token function">close</span><span class="token punctuation">(</span>SocketFD<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">pthread_kill</span><span class="token punctuation">(</span>ThreadRecv1<span class="token punctuation">,</span> SIGTERM<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Send termination signal to receive thread.</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">// Exit the loop.</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Thread function for receiving messages.</span>
    <span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">ReceiveThread1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">while</span> <span class="token punctuation">(</span>quit <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">memset</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> bytesRecv <span class="token operator">=</span> <span class="token function">recv</span><span class="token punctuation">(</span>SocketFD<span class="token punctuation">,</span> message<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            message<span class="token punctuation">[</span>bytesRecv<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span>
            message<span class="token punctuation">[</span><span class="token function">strcspn</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'\0'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span> <span class="token comment">// Skip empty messages.</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>bytesRecv <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"The other end has closed the connection or error receiving message!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token string">"quit"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token string">"QUIT"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Checking if the other user disconnected.</span>
                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t           (User \033[3;48;2;31;50;97m'%s'\033[0m has disconnected)\n\n"</span><span class="token punctuation">,</span> user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>discon<span class="token punctuation">)</span><span class="token punctuation">;</span>
                quit <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>discon<span class="token punctuation">)</span><span class="token punctuation">;</span>               
                <span class="token function">close</span><span class="token punctuation">(</span>SocketFD<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">pthread_kill</span><span class="token punctuation">(</span>ThreadSend1<span class="token punctuation">,</span> SIGTERM<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Send termination signal to send thread.</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">// Exit the loop.</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> 
                <span class="token comment">// Handling a normal message.</span>
                <span class="token function">clear_line</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\033[%dG\033[36;47m &gt; [%s] \033[0m\n\n"</span><span class="token punctuation">,</span> <span class="token number">54</span><span class="token punctuation">,</span> user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\033[%dG%s\n"</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\033[%dG\033[32;48;2;91;54;117m - (%s) &gt;&gt; \033[0m \n\n"</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> user2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"        "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">fflush</span><span class="token punctuation">(</span><span class="token constant">stdout</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">UserPrint</span><span class="token punctuation">(</span><span class="token keyword">char</span> user<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">char</span> user1<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Get current time.</span>
    time_t rawtime<span class="token punctuation">;</span>
    <span class="token keyword">struct</span> tm <span class="token operator">*</span>timeinfo<span class="token punctuation">;</span>
    <span class="token function">time</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rawtime<span class="token punctuation">)</span><span class="token punctuation">;</span>
    timeinfo <span class="token operator">=</span> <span class="token function">localtime</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rawtime<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> currentTime<span class="token punctuation">[</span><span class="token number">64</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token function">strftime</span><span class="token punctuation">(</span>currentTime<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>currentTime<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"%Y-%m-%d %H:%M:%S"</span><span class="token punctuation">,</span> timeinfo<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    ┌──────────────────────────────────────────────────────────┐"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    │\033[48;2;117;85;54m                    \033[1;2;38;2;67;247;180mUSER INFORMATIONS\033[0;48;2;117;85;54m                     \033[0m│"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    ├\033[48;2;117;85;54m──────────────────────────────────────────────────────────\033[0m┤"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    │\033[48;2;117;85;54m - - You are \033[3;93muser %d\033[0;48;2;117;85;54m   -    Statu: \033[3;32mOnline\033[0;48;2;117;85;54m                  \033[0m│"</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    ├\033[48;2;117;85;54m──────────────────────────────────────────────────────────\033[0m┤"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    │\033[48;2;117;85;54m - - Userename: \033[3;32m%-10s\033[0;48;2;117;85;54m                                \033[0m│"</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    ├\033[48;2;117;85;54m──────────────────────────────────────────────────────────\033[0m┤"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    │\033[48;2;117;85;54m - - Connected with: \033[3;38;2;127;140;15m%-10s\033[0;48;2;117;85;54m                           \033[0m│"</span><span class="token punctuation">,</span> user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    │\033[48;2;117;85;54m - - To Adress: \033[3;38;2;31;50;97m127.0.0.1\033[0;48;2;117;85;54m    &amp; port: \033[3;38;2;31;50;97m4700\033[0;48;2;117;85;54m                 \033[0m│"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    ├\033[48;2;117;85;54m──────────────────────────────────────────────────────────\033[0m┤"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    │\033[48;2;117;85;54m - - Current Time: \033[3;36m%-19s\033[0;48;2;117;85;54m                    \033[0m│"</span><span class="token punctuation">,</span> currentTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    └──────────────────────────────────────────────────────────┘\n\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> choice<span class="token punctuation">;</span>
    <span class="token keyword">int</span> res<span class="token punctuation">;</span>
    <span class="token keyword">struct</span> sockaddr_in ConnAddress<span class="token punctuation">;</span>
    <span class="token function">sem_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>SemUser<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"clear"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//PROGRAM MENU</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    \033[48;2;81;112;124m                                                             \033[0m"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    \033[48;2;81;112;124m                            MENU                             \033[0m"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    \033[48;2;81;112;124m                                                             \033[0m\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t     ___________________________________________________________"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    |\033[48;2;109;140;147m                                                           \033[0m|"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    |\033[48;2;109;145;147m             Welcome to \033[1;34mChatConnect\033[0m\033[48;2;109;145;147m application            \033[0m|"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    |\033[48;2;109;150;147m              \033[3m(Please choose an option below!)\033[0m\033[48;2;109;150;147m             \033[0m|"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    |\033[48;2;109;155;147m___________________________________________________________\033[0m|"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    |\033[48;2;64;64;64m                                                           \033[0m|"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    |\033[48;2;64;64;64m                 [1]  -  \033[3;38;2;109;174;152mHost a conncection\033[0m\033[48;2;64;64;64m                \033[0m|"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    |\033[48;2;64;64;64m_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\033[0m|"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    |\033[48;2;64;64;64m                                                           \033[0m|"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    |\033[48;2;64;64;64m         [2]  -  \033[3;38;2;109;174;152mSearch for an available connection\033[0m\033[48;2;64;64;64m        \033[0m|"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    |\033[48;2;64;64;64m_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\033[0m|"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    |\033[48;2;210;27;10m                                                           \033[0m|"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    |\033[48;2;214;27;14m                       [3]  -  \033[3;33mExit\033[0m\033[48;2;214;27;14m                        \033[0m|"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    |\033[48;2;218;27;18m___________________________________________________________\033[0m|\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\n    What is your choice? \033[3m[1/2/3]\033[0m: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>choice<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span>choice <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">||</span> choice <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\n\a    \033[3;31mOperation not found!\033[0m Re-choose an operation..\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\n    What is your choice? \033[3m[1/2/3]\033[0m: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>choice<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Clear the input message after using scanf().</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>choice <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n    You choosed: [1]  -  \033[3;35m'Host a conncection'\033[0m\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>choice <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n    You choosed: [2]  -  \033[3;35m'Search for an available connection'\033[0m\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>choice <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t\t\t      \033[3;100m- - Program closed - -\033[0m\n\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Create socket.</span>
    SocketFD <span class="token operator">=</span> <span class="token function">socket</span><span class="token punctuation">(</span>AF_INET<span class="token punctuation">,</span> SOCK_STREAM<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>SocketFD <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"\t\a     | - - - \u27B9 \033[31mError creating the socket!\033[0m                      |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// Enable address reuse.</span>
        <span class="token keyword">int</span> reuse <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token function">setsockopt</span><span class="token punctuation">(</span>SocketFD<span class="token punctuation">,</span> SOL_SOCKET<span class="token punctuation">,</span> SO_REUSEADDR<span class="token punctuation">,</span> <span class="token operator">&amp;</span>reuse<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>reuse<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Check connection availibility.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>choice <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Connect the client to the server.</span>
        <span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ConnAddress<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>ConnAddress<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        ConnAddress<span class="token punctuation">.</span>sin_family <span class="token operator">=</span> AF_INET<span class="token punctuation">;</span>
        ConnAddress<span class="token punctuation">.</span>sin_port <span class="token operator">=</span> <span class="token function">htons</span><span class="token punctuation">(</span><span class="token number">4700</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ConnAddress<span class="token punctuation">.</span>sin_addr<span class="token punctuation">.</span>s_addr <span class="token operator">=</span> <span class="token function">inet_addr</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        res <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span>SocketFD<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">struct</span> sockaddr <span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>ConnAddress<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>ConnAddress<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\n\t\t  \033[3;5;38;2;62;205;174mConnection available! press enter to continue...\033[0m"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\033[25m\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\n\t        - - \033[5;48;2;228;87;114m No connection found! Re-choose an operation \033[0m - -\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t      __________________________________________________________"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t     |\033[100m                                                          \033[0m|"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t     |\033[100m       [1]  -  Host a connection   /   [3]  -  Exit       \033[0m|"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t     |\033[100m__________________________________________________________\033[0m|\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\n    What is your choice? \033[3m[1/3]\033[0m: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>choice<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>choice <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t\t\t     \033[3;100m- - Program closed - -\033[0m\n\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">310</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">while</span> <span class="token punctuation">(</span>choice <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">||</span> choice <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\n\a    \033[3;48;2;228;87;114mOperation not found!\033[0m Re-choose an operation..\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\n    What is your choice? \033[3m[1/2/3]\033[0m: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>choice<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Clear the input message after using scanf().</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t      &lt; ------------ \033[1;94mSystem messages\033[0m ------------------------ &gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t     |                                                         |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">switch</span> <span class="token punctuation">(</span>choice<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Acting like a server side.</span>
        <span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment">// Bind the socket to the port number.</span>
            <span class="token keyword">struct</span> sockaddr_in ServAddress<span class="token punctuation">;</span>
            <span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ServAddress<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>ServAddress<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            ServAddress<span class="token punctuation">.</span>sin_family <span class="token operator">=</span> AF_INET<span class="token punctuation">;</span>
            ServAddress<span class="token punctuation">.</span>sin_port <span class="token operator">=</span> <span class="token function">htons</span><span class="token punctuation">(</span><span class="token number">4700</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ServAddress<span class="token punctuation">.</span>sin_addr<span class="token punctuation">.</span>s_addr <span class="token operator">=</span> <span class="token function">htonl</span><span class="token punctuation">(</span>INADDR_ANY<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>SocketFD<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">struct</span> sockaddr <span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>ServAddress<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>ServAddress<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t     | - - - \u27BC Socket binding was seccussful.                  |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"\t\a     | - - - \u27B9 \033[31mSocket binding failed!\033[0m                          |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t     | - - - \u27B9 \033[7mRun the program again and try \033[0;3;35m'searching for an available connection'\033[0m!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// listen to the client connection request.</span>
            <span class="token keyword">int</span> Lresult <span class="token operator">=</span> <span class="token function">listen</span><span class="token punctuation">(</span>SocketFD<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>Lresult <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t     | - - - \u27BC \033[5mWaiting for connection...\033[0m                       |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"\t\a     | - - - \u27B9 \033[31mListen failed!\033[0m                                  |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// Accept connection request.</span>
            <span class="token keyword">struct</span> sockaddr_in ClientConnAddr<span class="token punctuation">;</span>
            <span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ClientConnAddr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>ClientConnAddr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            socklen_t ClientAddrLength <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>ClientConnAddr<span class="token punctuation">)</span><span class="token punctuation">;</span>
            ServConnSockFD <span class="token operator">=</span> <span class="token function">accept</span><span class="token punctuation">(</span>SocketFD<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">struct</span> sockaddr<span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>ClientConnAddr<span class="token punctuation">,</span> <span class="token operator">&amp;</span>ClientAddrLength<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>ServConnSockFD <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"\t\a     | - - - \u27B9 \033[31mFailed to accept connection request.\033[0m            |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">int</span> check <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span>ServConnSockFD <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> check <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"\t\a     | - - - \u27B9 \033[31mFailed to accept connection request.\033[0m            |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t     | - - - \u27B9 \033[3mPresss 'Enter' to retry Connecting.\033[0m             |"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    ServConnSockFD <span class="token operator">=</span> <span class="token function">accept</span><span class="token punctuation">(</span>SocketFD<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">struct</span> sockaddr<span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>ClientConnAddr<span class="token punctuation">,</span> <span class="token operator">&amp;</span>ClientAddrLength<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    check<span class="token operator">--</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>check <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"\t\a     | - - - \u27B9 \033[31mConnection failed after all retries\033[0m             |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\033[25m"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t     | - - - \u27BC Connection request accepted - ID: %d             |\n"</span><span class="token punctuation">,</span> ServConnSockFD<span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">// Username.</span>
                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t     | - - - \u27BC Enter your Username: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">fgets</span><span class="token punctuation">(</span>user1<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">stdin</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                user1<span class="token punctuation">[</span><span class="token function">strlen</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span>user1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'\0'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t     | - - - \u27BC \033[31mInvalid username! Re-enter it.\033[0m                  |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t     | - - - \u27BC Enter your Username: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">fgets</span><span class="token punctuation">(</span>user1<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">stdin</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    user1<span class="token punctuation">[</span><span class="token function">strlen</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t     | - - - \u27BC You are connected.                              |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">// Send username to user2.</span>
                <span class="token keyword">int</span> bytesSent <span class="token operator">=</span> <span class="token function">send</span><span class="token punctuation">(</span>ServConnSockFD<span class="token punctuation">,</span> user1<span class="token punctuation">,</span> <span class="token function">strlen</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>bytesSent <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"\t\a     | - - - \u27B9 \033[31mError sending username\033[0m                          |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">41</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token function">sem_wait</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>SemUser<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Wait for other side username.</span>

                <span class="token comment">// Receive username from user2.</span>
                <span class="token function">memset</span><span class="token punctuation">(</span>user2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">int</span> unRecv <span class="token operator">=</span> <span class="token function">recv</span><span class="token punctuation">(</span>ServConnSockFD<span class="token punctuation">,</span> user2<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>unRecv <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"\t\a     | - - - \u27B9 \033[31mError receiving username\033[0m                        |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    user2<span class="token punctuation">[</span>unRecv<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span>
                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t     | - - - \u27BC %s connected with you.\n"</span><span class="token punctuation">,</span> user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token function">sem_post</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>SemUser<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Signal that username has been received.</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>

        <span class="token comment">// Acting like a client side.</span>
        <span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment">// Connect the client to the server.</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t     | - - - \u27BC Connection was seccussful.                      |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">// Username.</span>
                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t     | - - - \u27BC Enter your Username: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               
                <span class="token function">fgets</span><span class="token punctuation">(</span>user2<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">stdin</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                user2<span class="token punctuation">[</span><span class="token function">strlen</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span>user2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'\0'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t     | - - - \u27BC \033[31mInvalid username! Re-enter it.\033[0m                  |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t     | - - - \u27BC Enter your Username: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">fgets</span><span class="token punctuation">(</span>user2<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">stdin</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    user2<span class="token punctuation">[</span><span class="token function">strlen</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t     | - - - \u27BC You are connected.                              |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">//Send username to user1.</span>
                <span class="token keyword">int</span> unB_Sent <span class="token operator">=</span> <span class="token function">send</span><span class="token punctuation">(</span>SocketFD<span class="token punctuation">,</span> user2<span class="token punctuation">,</span> <span class="token function">strlen</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>unB_Sent <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"\t\a     | - - - \u27B9 \033[31mError sending username\033[0m                          |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">//sem_wait(&amp;SemUser); // Wait for other side username.</span>
                        
                <span class="token comment">// Receive username from user1.</span>
                <span class="token function">memset</span><span class="token punctuation">(</span>user1<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">int</span> unB_Recv <span class="token operator">=</span> <span class="token function">recv</span><span class="token punctuation">(</span>SocketFD<span class="token punctuation">,</span> user1<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>unB_Recv <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"\t\a     | - - - \u27B9 \033[31mError receiving username\033[0m                        |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    user1<span class="token punctuation">[</span>unB_Recv<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span>
                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t     | - - - \u27BC %s connected with you.\n"</span><span class="token punctuation">,</span> user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">//sem_post(&amp;SemUser); // Signal that username has been received.</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
            
        <span class="token keyword">default</span><span class="token punctuation">:</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t     |                                                         |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t      &lt; ----------------------------------------------------- &gt;\n\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\n\t\t\t      \033[3;5;38;2;81;40;170mpress enter to continue...\033[0m"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\033[25m\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"clear"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\033[48;2;81;112;124m"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    ┌──────────────────────────────────────────────────────────┐    "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    │                                                          │    "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    │                     \033[1m &gt; ChatConnect &lt;\033[0;48;2;81;112;124m                     │    "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    │                                                          │    "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t    └──────────────────────────────────────────────────────────┘    \033[0m\n\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\t           \033[3;100;96m (Press Ctrl+C or type 'quit' to disconnect) \033[0m\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Printing user informations.</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>choice<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token function">UserPrint</span><span class="token punctuation">(</span>user1<span class="token punctuation">,</span> user2<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>

        <span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token function">UserPrint</span><span class="token punctuation">(</span>user2<span class="token punctuation">,</span> user1<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>

        <span class="token keyword">default</span><span class="token punctuation">:</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Initialize mutex.</span>
    <span class="token function">pthread_mutex_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>discon<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">switch</span> <span class="token punctuation">(</span>choice<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment">// Create threads.</span>
            <span class="token keyword">int</span> Tsend_Create <span class="token operator">=</span> <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ThreadSend<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> sendThread<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>Tsend_Create <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"\033[31mError creating send thread\033[0m\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">34</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">int</span> Trecv_Create <span class="token operator">=</span> <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ThreadRecv<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> ReceiveThread<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>Trecv_Create <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"\033[31mError creating receive thread\033[0m\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// Joining threads.</span>
            <span class="token comment">// Waiting for the threads to finish execution.</span>
            <span class="token keyword">int</span> Tsend_Join <span class="token operator">=</span> <span class="token function">pthread_join</span><span class="token punctuation">(</span>ThreadSend<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>Tsend_Join <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"\033[31mError joining send thread\033[0m\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">int</span> Trecv_Join <span class="token operator">=</span> <span class="token function">pthread_join</span><span class="token punctuation">(</span>ThreadRecv<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>Trecv_Join <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"Error joining receive thread.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">37</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>

<span class="token comment">// The same as the case 1.</span>
<span class="token comment">// Just one difference in the threads functions used.</span>
        <span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment">// Create threads.</span>
            <span class="token keyword">int</span> ThSendCre <span class="token operator">=</span> <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ThreadSend1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> sendThread1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>ThSendCre <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"\033[31mError creating send thread\033[0m\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">34</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">int</span> ThRecvCre <span class="token operator">=</span> <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ThreadRecv1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> ReceiveThread1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>ThRecvCre <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"\033[31mError creating receive thread\033[0m\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// Joining threads.</span>
            <span class="token keyword">int</span> ThSendJoin <span class="token operator">=</span> <span class="token function">pthread_join</span><span class="token punctuation">(</span>ThreadSend1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>ThSendJoin <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"\033[31mError joining send thread\033[0m\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">int</span> ThRecvJoin <span class="token operator">=</span> <span class="token function">pthread_join</span><span class="token punctuation">(</span>ThreadRecv1<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>ThRecvJoin <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"Error joining receive thread.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">37</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>

        <span class="token keyword">default</span><span class="token punctuation">:</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">// Clean up semaphores.</span>
    <span class="token function">sem_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>SemUser<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Destroy mutex.</span>
    <span class="token function">pthread_mutex_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>discon<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
    <span class="token comment">// Close connection &amp; socket.</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>choice<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token function">close</span><span class="token punctuation">(</span>ServConnSockFD<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">close</span><span class="token punctuation">(</span>SocketFD<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>

        <span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token function">close</span><span class="token punctuation">(</span>SocketFD<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
            
        <span class="token keyword">default</span><span class="token punctuation">:</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>

    </div>
  </div>



</body></html>